Manager:
    StartMenu:
        name: 'start'
    LoadingScreen:
        name: 'loadingscreen'
    Menu:
        name:'menu'
    MenuMultiplayer:
        name:'menu-multiplayer'
    Game:
        name: 'game'
    GameOver:
        name: 'gameover'

<MenuButton@Button>:
    font_size:'50sp'
    background_normal:'assets/button.png'
    background_down:'assets/button_down.png'
    size_hint: None, None

<StartMenu>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'
        
        Label:
            text: 'Fabinho Bird'
            font_size: '70sp'
            y: (self.parent.height / 2) * 0.5
            color: 1, 1, 1, 1
            bold:True

        MenuButton:
            text: '1 Jogador'
            font_size: '50sp'
            size: int(root.width / 2.8) , int(root.height / 6)
            on_release: app.root.current = 'menu'
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) + self.height * 0.3

        MenuButton:
            text: '2 Jogadores'
            font_size: '50sp'
            size: int(root.width / 2.8) , int(root.height / 6)
            on_release: app.root.current = 'loadingscreen'
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) - self.height * 1

        MenuButton:
            # EXIT BUTTON
            text: 'Exit'
            on_release: app.stop()
            size: int(root.width / 2.8) , int(root.height / 6)
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) - self.height * 2.3

<LoadingScreen>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: 'Conectando ao servidor...'
            font_size: '35sp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

<MenuMultiplayer>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: root.status
            font_size: '20sp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

        MenuButton:
            # BACK BUTTON
            text: 'Back'
            on_release: app.root.current = 'start'
            center_x: (self.parent.width * 3 / 4)
            size: int(root.width / 4) , int(root.height / 6)

<Menu>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: 'Fabinho Bird'
            font_size: '50sp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

        Widget:
        FloatLayout:
            MenuButton:
                text: 'Start'
                on_release: app.root.current = 'game'
                center_x: (self.parent.width / 4)
                size: int(root.width / 4) , int(root.height / 6)

            MenuButton:
                # BACK BUTTON
                text: 'Back'
                on_release: app.root.current = 'start'
                center_x: (self.parent.width * 3 / 4)
                size: int(root.width / 4) , int(root.height / 6)

<Player>:
    source:'assets/player.png'
<Game>:
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            size: self.size
            pos: self.pos
            source: 'assets/background.png'
    FloatLayout:

        Label:
            # Score Label
            text: 'Score: ' + str(int(root.score))
            font_size: '70sp'
            color: 0.2, 0.7, 1, 1
            bold:True
            size_hint_y: None
            height: self.font_size
            y: root.height*0.95 - self.height

        # MenuButton:
        #     text:'Menu'
        #     on_release: app.root.current = 'menu'
        #     y: self.parent.height - self.height
        #     size: int(root.width / 4) , int(root.height / 6)

        #     x: 0

        Player:
            id: player
            # allow_stretch: True
            size_hint: None, None
            size: root.height/12, root.height/12
            x: root.width/20
            y: root.height/2

<GameOver>:
    FloatLayout:
        Label:
            text: 'Game Over'
            font_size: '100sp'
            bold:True
        Label:
            text: 'Score: ' + str(int(root.score))
            font_size: '70sp'
            bold:True
            size_hint_y: None
            height: self.font_size
            y: root.height*0.95 - self.height
        MenuButton:
            text:'Try Again'
            font_size: '50sp'
            on_release: app.root.current = 'game'
            center_x: (self.parent.width / 2) - self.width / 2
            size: int(root.width / 4) , int(root.height / 6)

        MenuButton:
            text: 'Exit'
            font_size: '50sp'
            on_release: app.stop()
            center_x: (self.parent.width / 2) + self.width / 2
            size: int(root.width / 4) , int(root.height / 6)


<Obstacle>:
    canvas:
        Color:
            rgba: 0.3, 0.2, 0.2, 1
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: None, None
    width: '50dp'