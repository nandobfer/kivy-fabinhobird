Manager:
    StartMenu:
        name: 'start'
    LoadingScreen:
        name: 'loadingscreen'
    Menu:
        name:'menu'
    MenuMultiplayer:
        name:'menu-multiplayer'
    Game:
        name: 'game'
    GameMultiplayer:
        name: 'game-multiplayer'
    GameOver:
        name: 'gameover'

<MenuButton@Button>:
    font_size:'50dp'
    background_normal:'assets/button.png'
    background_disabled:'assets/button.png'
    background_down:'assets/button_down.png'
    size_hint: None, None

<RightArrow@Button>:
    background_normal:'assets/right_button.png'
    background_disabled:'assets/right_button.png'
    background_down:'assets/right_button_down.png'
    size_hint: None, None

<LeftArrow@Button>:
    background_normal:'assets/left_button.png'
    background_disabled:'assets/left_button.png'
    background_down:'assets/left_button_down.png'
    size_hint: None, None


<StartMenu>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'
        
        Label:
            text: 'Fabinho Bird'
            font_size: '70dp'
            y: (self.parent.height / 2) * 0.5
            color: 1, 1, 1, 1
            bold:True

        MenuButton:
            text: '1 Jogador'
            font_size: '50dp'
            size: int(root.width / 2.8) , int(root.height / 6)
            on_release: app.root.current = 'menu'
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) + self.height * 0.3

        MenuButton:
            text: '2 Jogadores'
            font_size: '50dp'
            size: int(root.width / 2.8) , int(root.height / 6)
            on_release: app.root.current = 'loadingscreen'
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) - self.height * 1

        MenuButton:
            # EXIT BUTTON
            text: 'Exit'
            on_release: app.stop()
            size: int(root.width / 2.8) , int(root.height / 6)
            center_x: self.parent.width / 2
            center_y: (self.parent.height / 2) - self.height * 2.3

<LoadingScreen>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: 'Conectando ao servidor...'
            font_size: '35dp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

<MenuMultiplayer>:
    BoxLayout:
        orientation:'horizontal'
        FloatLayout:
            canvas:
                Color:
                    rgba: 1,1,1,1
                Rectangle:
                    size: self.size
                    pos: self.pos

            Image:
                size_hint: None, None
                width: root.width / 5
                height: root.height / 5
                center: self.parent.center
                source: root.skin_1

            LeftArrow:
                size: root.width/15, root.height/10
                center_y: root.height/2
                center_x: self.parent.center_x / 2
                on_release: root.previous_skin()

            RightArrow:
                size: root.width/15, root.height/10
                center_y: root.height/2
                center_x: self.parent.center_x * 1.5
                on_release: root.next_skin()


        FloatLayout:
            canvas:
                Color:
                    rgba: 0,0,0,1
                Rectangle:
                    size: self.size
                    pos: self.pos

    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,0
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: root.status
            font_size: '20dp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

        MenuButton:
            # START MENU
            text: 'Start'
            on_release: root.play()
            center_x: (self.parent.width / 4)
            size: int(root.width / 4) , int(root.height / 6)
            id: start_button
            disabled: True

        MenuButton:
            # BACK BUTTON
            text: 'Back'
            on_release: root.back()
            center_x: (self.parent.width * 3 / 4)
            size: int(root.width / 4) , int(root.height / 6)

<Menu>:
    FloatLayout:
        canvas:
            Color:
                rgba: 1,1,1,1
            Rectangle:
                size: self.size
                pos: self.pos
                source: 'assets/background.png'

        Label:
            text: 'Fabinho Bird'
            font_size: '50dp'
            y: (self.parent.height / 2) * 0.5
            color: 0.2, 0.7, 1, 1
            bold:True

        Image:
            size_hint: None, None
            width: root.width / 5
            height: root.height / 5
            center: self.parent.center
            source: root.skin_1

        LeftArrow:
            id: previous_button
            size: root.width/15, root.height/10
            center_y: root.height/2
            center_x: self.parent.center_x / 2
            on_release: root.previous_skin()

        RightArrow:
            id: next_button
            size: root.width/15, root.height/10
            center_y: root.height/2
            center_x: self.parent.center_x * 1.5
            on_release: root.next_skin()

        MenuButton:
            text: 'Start'
            on_release: root.play()
            center_x: (self.parent.width / 4)
            size: int(root.width / 4) , int(root.height / 6)

        MenuButton:
            # BACK BUTTON
            text: 'Back'
            on_release: app.root.current = 'start'
            center_x: (self.parent.width * 3 / 4)
            size: int(root.width / 4) , int(root.height / 6)

# <Player>:
    
<Game>:
    canvas.before:
        Color:
            rgba: 1,1,1,1
        Rectangle:
            size: self.size
            pos: self.pos
            source: 'assets/background.png'
    FloatLayout:

        Label:
            # Score Label
            text: 'Score: ' + str(int(root.score))
            font_size: '70dp'
            color: 0.2, 0.7, 1, 1
            bold:True
            size_hint_y: None
            height: self.font_size
            y: root.height*0.95 - self.height

        # MenuButton:
        #     text:'Menu'
        #     on_release: app.root.current = 'menu'
        #     y: self.parent.height - self.height
        #     size: int(root.width / 4) , int(root.height / 6)

        #     x: 0

        Player:
            id: player
            # allow_stretch: True
            size_hint: None, None
            size: root.height/12, root.height/12
            x: root.width/20
            y: root.height/2
            # source: root.skin_1

<GameOver>:
    FloatLayout:
        Label:
            text: 'Game Over'
            font_size: '100dp'
            bold:True
        Label:
            text: 'Score: ' + str(int(root.score))
            font_size: '70dp'
            bold:True
            size_hint_y: None
            height: self.font_size
            y: root.height*0.95 - self.height
        MenuButton:
            text:'Try Again'
            font_size: '50dp'
            on_release: root.replay()
            center_x: (self.parent.width / 2) - self.width / 2
            size: int(root.width / 4) , int(root.height / 6)

        MenuButton:
            text: 'Menu'
            font_size: '50dp'
            on_release: app.root.current = 'start'
            center_x: (self.parent.width / 2) + self.width / 2
            size: int(root.width / 4) , int(root.height / 6)


<Obstacle>:
    canvas:
        Color:
            rgba: 0.3, 0.2, 0.2, 1
        Rectangle:
            size: self.size
            pos: self.pos
    size_hint: None, None
    width: '50dp'